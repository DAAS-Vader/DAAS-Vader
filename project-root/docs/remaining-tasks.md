# 🚧 DaaS MVP 파이프라인 구현 로드맵

## 🎯 MVP 목표: 코드 업로드 → Walrus 저장 → 노틸러스 빌드 → 이미지 저장

### 핵심 플로우
```
사용자 코드 업로드 → Walrus 저장 → EC2 노틸러스 → Docker 빌드 → Walrus 이미지 저장
```

## 📊 현재 구현 상태

### ✅ 완료된 부분

**프론트엔드 (UI/UX 구현)**
- 5단계 사용자 플로우 구현 (`/src/app/page.tsx`)
- 프로젝트 업로드 인터페이스 (`ProjectUpload`) - **walletInfo 연동됨**
- **🆕 빌드 대시보드 (`BuildDashboard`)** - **완전 구현됨**
  - 번들 목록 표시 및 선택
  - 빌드 진행률 실시간 표시
  - 빌드 로그 스트리밍
  - Walrus URL 링크 및 복사 기능
  - Kubernetes 스펙 표시
  - 환경 변수 및 의존성 관리
- **🆕 Suiet 지갑 연동 (`WalletProviderWrapper`)** - **실제 구현됨**
- 모니터링 대시보드 (`MonitoringDashboard`) - **Mock 상태**
- 반응형 UI/UX with shadcn/ui + Tailwind

**백엔드 핵심 기능 구현**
- **🆕 Sui 클라이언트 통합** (`/backend/src/index.ts`)
  - Sui devnet/mainnet 연결
  - 노틸러스 호환 미들웨어
  - 인증 미들웨어 활성화
- **🆕 Docker 빌드 시스템** (`/routes/docker.ts`, `/services/dockerBuilderService.ts`)
  - 빌드 시작/상태/취소/푸시 API
  - 실시간 빌드 로그 추적
  - 레지스트리 푸시 기능
- **🆕 노틸러스 서비스** (`/services/nautilusService.ts`)
  - 보안 컨테이너 빌드
  - 암호화 증명 시스템
- **🆕 Walrus SDK 통합** (`/services/walrusSDKService.ts`)
- 프로젝트 업로드 API (`/routes/project.ts`) - **기본 구조**
- Seal 보안 API (`/routes/seal.ts`) - **기본 구조**
- GitHub 연동 서비스 (`/services/githubService.ts`) - **부분 구현**

---

## 🔄 현재 상태 분석

**✅ 대폭 개선된 부분**
- ✅ **빌드 대시보드 완전 구현**: 번들 선택, 빌드 진행률, 로그 스트리밍, 결과 표시
- ✅ **Docker 빌드 시스템**: 백엔드 API 및 서비스 완전 구현
- ✅ **Sui 지갑 연동**: Suiet Wallet 실제 연동
- ✅ **노틸러스 서비스**: 보안 빌드 프로세스 구현

**🔧 남은 연결 작업**
1. **프론트엔드 ↔ 백엔드 API 연동**
   - BuildDashboard가 실제 `/api/docker/*` 엔드포인트 호출
   - ProjectUpload가 실제 Walrus 업로드 API 호출
2. **Walrus 실제 연동** (SDK 서비스 완성)
3. **빌드 파이프라인 통합 테스트**

---

## 🎯 MVP 완성을 위한 핵심 과제

### 1. 프론트엔드 ↔ 백엔드 API 연동 (우선순위: 최고)

#### 1.1 BuildDashboard 실제 API 연동
- [ ] **번들 목록 API 연결**
  - `fetchBundles()` → `/api/project/bundles` 실제 호출
  - 인증 토큰 관리 및 전달
  - 에러 처리 개선

- [ ] **빌드 시작 API 연결**
  - `startBuild()` → `/api/project/build` 실제 호출
  - Docker 빌드 프로세스 트리거
  - 실시간 상태 업데이트

#### 1.2 ProjectUpload 실제 연동
- [ ] **Walrus 업로드 연동**
  - 현재 Mock 제거하고 `/api/project/upload` 호출
  - 파일 압축 및 Walrus 저장
  - 업로드 진행률 실시간 표시

### 2. Walrus SDK 서비스 완성 (우선순위: 높음)

#### 2.1 Walrus 실제 연동
- [ ] **WalrusSDKService 완성**
  - `/services/walrusSDKService.ts` 실제 구현
  - Walrus 테스트넷 연결
  - 파일 업로드/다운로드 구현

- [ ] **메타데이터 관리**
  - 번들 정보 저장 및 조회
  - 체크섬 검증
  - 버전 관리

### 3. 빌드 파이프라인 통합 (우선순위: 높음)

#### 3.1 통합 플로우 구현
- [ ] **완전한 파이프라인 연결**
  - ProjectUpload → Walrus 저장 → BuildDashboard
  - 업로드 완료 후 자동 빌드 가능
  - 상태 전파 및 동기화

#### 3.2 실시간 통신 구현
- [ ] **WebSocket 연결**
  - 빌드 로그 실시간 스트리밍
  - 진행률 업데이트
  - 상태 변경 알림

### 4. 사용자 경험 개선 (우선순위: 중간)

#### 4.1 통합된 워크플로우
- [ ] **5단계 플로우 실제 동작**
  - 지갑 연결 → 노드 선택 → 업로드 → 빌드 → 모니터링
  - 각 단계간 데이터 전달 및 상태 관리
  - 에러 복구 및 재시도 로직

#### 4.2 결과 표시 및 관리
- [ ] **빌드 결과 통합 표시**
  - Walrus URL 링크 및 메타데이터
  - Kubernetes 스펙 다운로드
  - 배포 히스토리 관리

---

## 🗓️ MVP 구현 단계 (업데이트됨)

### Phase 1: API 연동 및 통합 (3-4일)
1. **BuildDashboard ↔ 백엔드 연결**
   - 번들 목록 API 호출 실제 구현
   - 빌드 시작 API 연결
   - 인증 토큰 관리 구현

2. **ProjectUpload API 연동**
   - Mock 제거하고 실제 Walrus 업로드
   - 업로드 진행률 실시간 표시
   - 에러 처리 및 재시도

### Phase 2: Walrus SDK 완성 (2-3일)
1. **WalrusSDKService 구현**
   - Walrus 테스트넷 실제 연결
   - 파일 업로드/다운로드 구현
   - 메타데이터 관리

2. **번들 관리 시스템**
   - 업로드된 프로젝트 추적
   - 체크섬 검증
   - 버전 관리

### Phase 3: 실시간 통신 구현 (2-3일)
1. **WebSocket 빌드 로그**
   - 실시간 빌드 로그 스트리밍
   - 진행률 업데이트
   - 상태 변경 알림

2. **파이프라인 통합**
   - 업로드 → 빌드 자동 연결
   - 상태 전파 및 동기화
   - 에러 복구

### Phase 4: 최종 통합 및 테스트 (2-3일)
1. **5단계 플로우 완성**
   - 전체 워크플로우 연결
   - 단계간 데이터 전달
   - UX 개선

2. **종합 테스트**
   - 전체 파이프라인 테스트
   - 에러 케이스 처리
   - 성능 최적화

---

## 🔧 기술 스택 및 의존성

### 필수 기술 스택
- **Walrus API**: 분산 저장소 연동
- **Docker**: 이미지 빌드 환경
- **WebSocket**: 실시간 통신
- **EC2**: 노틸러스 호스팅 환경

### 외부 의존성
- Walrus 테스트넷/메인넷 접근
- EC2 인스턴스 및 Docker 환경
- 안정적인 네트워크 연결

---

## 🚫 MVP에서 제외되는 기능들

**나중에 구현할 기능들** *(백엔드 연결 이후)*
- Sui 지갑 실제 결제 연동
- 복잡한 워커노드 네트워크
- 스테이킹 및 토큰 이코노미
- 고급 모니터링 및 분석
- 보안 및 권한 관리 시스템
- 다중 런타임 지원

---

## 📝 성공 기준 (업데이트됨)

**MVP 완성 조건:**
1. ✅ **Suiet 지갑 연결**: 실제 Sui 지갑 연결 및 인증
2. ✅ **프로젝트 업로드**: 파일을 실제 Walrus에 저장
3. ✅ **빌드 대시보드**: 업로드된 번들 목록 표시 및 선택
4. ✅ **Docker 빌드**: 선택된 번들로 실제 이미지 빌드
5. ✅ **실시간 모니터링**: 빌드 진행률, 로그, 결과를 실시간 표시
6. ✅ **빌드 결과 저장**: 완성된 이미지를 Walrus에 저장
7. ✅ **통합 워크플로우**: 업로드 → 빌드 → 결과 전체 플로우 동작

**추가 검증 항목:**
- ✅ Walrus URL에서 실제 파일 다운로드 가능
- ✅ Kubernetes 스펙 생성 및 표시
- ✅ 빌드 로그 실시간 스트리밍
- ✅ 에러 발생시 적절한 사용자 피드백

이 MVP가 완성되면 완전한 "코드 업로드 → Walrus 저장 → 노틸러스 빌드 → 이미지 저장" 파이프라인이 동작하게 되어, 실제 탈중앙화 서버리스 플랫폼의 핵심 기능이 구현됩니다.